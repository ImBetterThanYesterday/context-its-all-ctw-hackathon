# E2B Documentation

Aqu√≠ encontrar√°s todas las gu√≠as, conceptos y referencias de SDK para desarrollar con E2B.

Generated bash

      `# Instalar el int√©rprete de c√≥digo
# En la imagen se muestra la pesta√±a de JavaScript & TypeScript
npm i @e2b/code-interpreter`

## What is E2B?

E2B es una infraestructura **open-source** que te permite ejecutar c√≥digo generado por IA en sandboxes (entornos de prueba) seguros y aislados en la nube. Para iniciar y controlar los sandboxes, utiliza nuestro **Python SDK** o **JavaScript SDK**.

Algunos de los casos de uso t√≠picos de E2B son el an√°lisis o visualizaci√≥n de datos con IA, la ejecuci√≥n de c√≥digo generado por IA en varios lenguajes, un *playground* para agentes de codificaci√≥n, un entorno para evaluaciones de *codegen* (generaci√≥n de c√≥digo) o la ejecuci√≥n de aplicaciones completas generadas por IA como en [Fragments](https://www.google.com/url?sa=E&q=https%3A%2F%2Ffragments.e2b.dev%2F).

## Under the hood (C√≥mo funciona por dentro)

El Sandbox de E2B es una peque√±a m√°quina virtual (VM) aislada que se puede iniciar muy r√°pidamente (~150ms). Puedes pensar en √©l como un peque√±o ordenador para el modelo de IA. Puedes ejecutar muchos sandboxes a la vez. Normalmente, se ejecuta un sandbox separado para cada LLM, usuario o sesi√≥n de agente de IA en tu aplicaci√≥n. Por ejemplo, si estuvieras creando un chatbot de an√°lisis de datos con IA, iniciar√≠as un sandbox para cada sesi√≥n de usuario.

---

## Quickstart (Inicio r√°pido)

- **Running your first Sandbox**
    - Aprende a iniciar tu primer Sandbox de E2B con nuestro SDK de Python o JavaScript.
- **Connecting LLMs to E2B**
    - Conecta tu LLM favorito a E2B para ejecutar c√≥digo generado por IA dentro del Sandbox.
- **Uploading & downloading files**
    - Una gu√≠a r√°pida sobre c√≥mo subir y bajar archivos desde y hacia el Sandbox.
- **Install custom packages**
    - Personaliza tu Sandbox con paquetes de terceros.

## Code interpreting with AI (Interpretaci√≥n de c√≥digo con IA)

- **Analyze data with AI**
    - Aprende a usar E2B para ejecutar c√≥digo generado por IA para analizar tus datos.
- **Create charts & visualizations**
    - Crea gr√°ficos interactivos ejecutando c√≥digo Python en E2B.

## Learn the core concepts (Aprende los conceptos clave)

- **Sandbox lifecycle**
    - Aprende c√≥mo iniciar el sandbox, gestionar su ciclo de vida e interactuar con √©l.
- **Sandbox persistence**
    - Aprende a lograr la persistencia de datos pausando y reanudando los sandboxes.
- **Filesystem**
    - El Sandbox tiene un sistema de archivos aislado que puedes usar para crear, leer, escribir y eliminar archivos.
- **Commands**
    - Ejecuta comandos de terminal dentro del Sandbox e inicia cualquier proceso dentro de √©l.

---

# Running your first Sandbox

Esta gu√≠a te mostrar√° c√≥mo iniciar tu primer Sandbox de E2B.

### 1. Create E2B account

Cada nueva cuenta de E2B obtiene $100 en cr√©ditos. Puedes registrarte [aqu√≠](https://e2b.dev/docs/getting-started/running-sandbox).

### 2. Set your environment variables

1. Navega al [Dashboard de E2B](https://e2b.dev/dashboard).
2. Copia tu clave API.
3. Pega tu clave API de E2B en tu archivo `.env`.

**.env**

```
E2B_API_KEY=e2b_***

```

### 3. Install E2B SDK

Instala el SDK de E2B en tu proyecto ejecutando el siguiente comando en tu terminal.

**Terminal (JavaScript & TypeScript)**

```bash
npm i @e2b/code-interpreter dotenv

```

### 4. Write code for starting Sandbox

Escribiremos el c√≥digo m√≠nimo para iniciar un Sandbox, ejecutar Python dentro de √©l y listar todos los archivos dentro del directorio ra√≠z.

**index.ts (JavaScript & TypeScript)**

```tsx
import 'dotenv/config'
import { Sandbox } from '@e2b/code-interpreter'

const sbx = await Sandbox.create() // Por defecto, el sandbox est√° activo durante 5 minutos
const execution = await sbx.runCode('print("hello world")') // Ejecuta Python dentro del sandbox
console.log(execution.logs)

const files = await sbx.files.list('/')
console.log(files)

```

### 5. Start your first E2B Sandbox

Ejecuta el c√≥digo con el siguiente comando:

**Terminal (JavaScript & TypeScript)**

```bash
npx tsx ./index.ts

```

# Connect LLMs to E2B

E2B puede funcionar con cualquier LLM y framework de IA. La forma m√°s f√°cil de conectar un LLM a E2B es usar las capacidades de uso de herramientas del LLM (a veces conocidas como *function calling*).

Si el LLM no admite el uso de herramientas, puedes, por ejemplo, indicarle al LLM que genere fragmentos de c√≥digo y luego extraer manualmente los fragmentos de c√≥digo con RegEx.

**Contents**

- OpenAI
- Anthropic
- Mistral
- Groq
- Vercel AI SDK
- CrewAI
- LangChain
- LlamaIndex
- Ollama
- Hugging Face

---

## Anthropic

### Simple

Generated python

      `# pip install anthropic e2b-code-interpreter
from anthropic import Anthropic
from e2b_code_interpreter import Sandbox

# Create Anthropic client
client = Anthropic()
model = "claude-3-5-sonnet-20240620"

system_prompt = "You are a helpful assistant that can execute python code in a jupyter notebook. Only respond with the code to execute."
prompt = "Calculate how many r's are in the word 'strawberry'"

# Send messages to Anthropic API
response = client.messages.create(
    model=model,
    max_tokens=1024,
    messages=[
        {"role": "assistant", "content": system_prompt},
        {"role": "user", "content": prompt}
    ]
)

# Extract code from response
code = response.content[0].text

# Execute code in E2B Sandbox
with Sandbox() as sandbox:
    execution = sandbox.run_code(code)
    result = execution.logs.stdout

print(result)`

### Function calling

Generated python

      `# pip install anthropic e2b-code-interpreter
from anthropic import Anthropic
from e2b_code_interpreter import Sandbox

# Create Anthropic client
client = Anthropic()
model = "claude-3-5-sonnet-20240620"

# Define the messages
messages = [
    {
        "role": "user",
        "content": "Calculate how many r's are in the word 'strawberry'"
    }
]

# Define the tools
tools = [{
    "name": "execute_python",
    "description": "Execute python code in a jupyter notebook cell and return (not print) the result",
    "input_schema": {
        "type": "object",
        "properties": {
            "code": {
                "type": "string",
                "description": "The python code to execute in a single cell"
            }
        },
        "required": ["code"]
    }
}]

# Generate text with Anthropic
message = client.messages.create(
    model=model,
    max_tokens=1024,
    messages=messages,
    tools=tools
)

# Append the response message to the messages list
messages.append(
    {"role": "assistant", "content": message.content}
)

# Execute tool use if it's called by the model
if message.stop_reason == "tool_use":
    tool_use = next(block for block in message.content if block.type == "tool_use")
    tool_name = tool_use.name
    tool_input = tool_use.input

    if tool_name == "execute_python":
        with Sandbox() as sandbox:
            code = tool_input['code']
            execution = sandbox.run_code(code)
            result = execution.text

    # Append the tool result to the messages list
    messages.append({
        "role": "user",
        "content": [
            {
                "type": "tool_result",
                "tool_use_id": tool_use.id,
                "content": result,
            },
        ],
    })

    # Compute the final response
    final_response = client.messages.create(
        model=model,
        max_tokens=1024,
        messages=messages,
        tools=tools
    )

print(final_response.content[0].text)`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). Python

IGNORE_WHEN_COPYING_END

# Upload & downloads files

E2B Sandbox te permite subir y bajar archivos hacia y desde el Sandbox.

Una forma alternativa de llevar tus datos al sandbox es crear una [plantilla de sandbox personalizada](https://www.google.com/url?sa=E&q=https%3A%2F%2Fe2b.dev%2Fdocs%2Fsandbox-templates%2Foverview).

## Upload file

**JavaScript & TypeScript**

Generated javascript

      `import { Sandbox } from '@e2b/code-interpreter'

// Leer archivo local relativo al directorio de trabajo actual
const content = fs.readFileSync('local/file')

const sbx = await Sandbox.create()
// Subir archivo al sandbox a la ruta absoluta '/home/user/my-file'
await sbx.files.write('/home/user/my-file', content)`

## Upload multiple files

Actualmente, si quieres subir m√∫ltiples archivos, necesitas subir cada uno por separado. Estamos trabajando en una mejor soluci√≥n.

**JavaScript & TypeScript**

Generated javascript

      `import { Sandbox } from '@e2b/code-interpreter'

// Leer archivo local relativo al directorio de trabajo actual
const fileA = fs.readFileSync('local/file/a')
const fileB = fs.readFileSync('local/file/b')

const sbx = await Sandbox.create()
// Subir archivo A al sandbox a la ruta absoluta '/home/user/my-file-a'
await sbx.files.write('/home/user/my-file-a', fileA)
// Subir archivo B al sandbox a la ruta absoluta '/home/user/my-file-b'
await sbx.files.write('/home/user/my-file-b', fileB)`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). JavaScript

IGNORE_WHEN_COPYING_END

## Upload directory

Actualmente no soportamos una forma f√°cil de subir un directorio completo. Necesitas subir cada archivo por separado.

Estamos trabajando en una mejor soluci√≥n.

## Download file

Para descargar un archivo, primero necesitas obtener su contenido y luego escribirlo en un archivo local.

**JavaScript & TypeScript**

Generated javascript

      `import { Sandbox } from '@e2b/code-interpreter'

const sbx = await Sandbox.create()
// Descargar archivo del sandbox desde la ruta absoluta '/home/user/my-file'
const content = await sbx.files.read('/home/user/my-file')
// Escribir archivo en la ruta local relativa al directorio de trabajo actual
fs.writeFileSync('local/file', content)`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). JavaScript

IGNORE_WHEN_COPYING_END

## Download multiple files

Para descargar m√∫ltiples archivos, necesitas descargar cada uno por separado desde el sandbox.

Estamos trabajando en una mejor soluci√≥n.

**JavaScript & TypeScript**

Generated javascript

      `import { Sandbox } from '@e2b/code-interpreter'

const sbx = await Sandbox.create()
// Descargar archivo A del sandbox desde la ruta absoluta '/home/user/my-file-a'
const contentA = await sbx.files.read('/home/user/my-file-a')
// Escribir archivo A en la ruta local relativa al directorio de trabajo actual
fs.writeFileSync('local/file/a', contentA)

// Descargar archivo B del sandbox desde la ruta absoluta '/home/user/my-file-b'
const contentB = await sbx.files.read('/home/user/my-file-b')
// Escribir archivo B en la ruta local relativa al directorio de trabajo actual
fs.writeFileSync('local/file/b', contentB)`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). JavaScript

IGNORE_WHEN_COPYING_END

## Download directory

Actualmente no soportamos una forma f√°cil de descargar un directorio completo. Necesitas descargar cada archivo por separado.

Estamos trabajando en una mejor soluci√≥n.

# Install custom packages

Hay dos maneras de instalar paquetes personalizados en el Sandbox de E2B.

1. [Crear un sandbox personalizado con paquetes preinstalados](https://www.notion.so/E2B-Documentation-22f5eb9a65a5809ba29ec115efdc7b9c?pvs=21).
2. [Instalar paquetes durante el tiempo de ejecuci√≥n del sandbox](https://www.notion.so/E2B-Documentation-22f5eb9a65a5809ba29ec115efdc7b9c?pvs=21).

---

## Create a custom sandbox

Usa esta opci√≥n si sabes de antemano qu√© paquetes necesitar√°s en el sandbox.

**Prerrequisitos:**

- E2B CLI
- Docker en ejecuci√≥n

> ‚ÑπÔ∏è Una plantilla de sandbox personalizada es una imagen de Docker que convertimos autom√°ticamente en un sandbox que luego puedes iniciar con nuestro SDK.
> 

### 1. Install E2B CLI

**Usando Homebrew (en macOS)**

```bash
brew install e2b

```

**Usando NPM**

```bash
npm i -g @e2b/cli

```

### 2. Login to E2B CLI

Antes de que puedas crear un sandbox personalizado, necesitas iniciar sesi√≥n en la CLI de E2B.

```bash
e2b auth login

```

### 3. Initialize a sandbox template

```bash
e2b template init

```

### 4. Specify the packages you need in `e2b.Dockerfile`

Edita el `e2b.Dockerfile` para instalar los paquetes que necesites.

> ‚ÑπÔ∏è Necesitas usar la imagen base e2bdev/code-interpreter:latest.
> 

**e2b.Dockerfile**

```
FROM e2bdev/code-interpreter:latest

RUN pip install cowsay
RUN npm install cowsay

```

### 5. Build the sandbox template

Ejecuta el siguiente comando para construir la plantilla del sandbox.

```bash
e2b template build -c "/root/.jupyter/start-up.sh"

```

Esto tomar√° un tiempo, ya que convierte la imagen de Docker en un sandbox que es una peque√±a VM. Al final del proceso, ver√°s el ID del sandbox de esta manera:

```
Running postprocessing. It can take up to few minutes.

Postprocessing finished.
‚úÖ Building sandbox template YOUR_TEMPLATE_ID finished.

```

### 6. Start your custom sandbox

Ahora puedes pasar el ID de la plantilla al SDK para iniciar tu sandbox personalizado.

**JavaScript & TypeScript**

```jsx
import { Sandbox } from '@e2b/code-interpreter'

const sbx = Sandbox.create({
  template: 'YOUR_TEMPLATE_ID',
})

```

---

## Install packages during the sandbox runtime

Usa esta opci√≥n si no sabes de antemano qu√© paquetes necesitar√°s en el sandbox. Puedes instalar paquetes con el gestor de paquetes de tu elecci√≥n.

> ‚ÑπÔ∏è Los paquetes instalados durante el tiempo de ejecuci√≥n solo est√°n disponibles en la instancia del sandbox en ejecuci√≥n. Cuando inicies una nueva instancia de sandbox, los paquetes no estar√°n disponibles.
> 

### 1. Install Python packages with PIP

**JavaScript & TypeScript**

```jsx
import { Sandbox } from '@e2b/code-interpreter'

const sbx = Sandbox.create()
sbx.commands.run('pip install cowsay') // Esto instalar√° el paquete cowsay
sbx.runCode(`
import cowsay
cowsay.cow('Hello, world!')
`)

```

### 2. Install Node.js packages with NPM

**JavaScript & TypeScript**

```jsx
import { Sandbox } from '@e2b/code-interpreter'

const sbx = Sandbox.create()
sbx.commands.run('npm install cowsay') // Esto instalar√° el paquete cowsay
sbx.runCode(`
const cowsay = require('cowsay')
console.log(cowsay.say({ text: 'Hello, world!' }))
`, { language: 'javascript' })

```

### 3. Install packages with package manager of your choice

Dado que los Sandboxes de E2B son m√°quinas basadas en Debian, puedes usar cualquier gestor de paquetes soportado por Debian. Solo necesitas asegurarte de que el gestor de paquetes ya est√© instalado en el sandbox.

Por ejemplo, para instalar `curl` y `git`, puedes usar los siguientes comandos:

**JavaScript & TypeScript**

```jsx
import { Sandbox } from '@e2b/code-interpreter'

const sbx = Sandbox.create()
await sbx.commands.run('apt-get update && apt-get install -y curl git')

```

# API Key

Para usar la clave API, puedes:

- Establecer la clave API como la variable de entorno E2B_API_KEY para evitar pasarla cada vez que creas un sandbox.
- O pasarla directamente al constructor de Sandbox como se muestra a continuaci√≥n:

**JavaScript & TypeScript**

Generated javascript

      `import { Sandbox } from '@e2b/code-interpreter'

const sandbox = await Sandbox.create({ apiKey: 'YOUR_API_KEY' })`

### Where to find API key

Puedes obtener tu clave API en el [dashboard](https://www.google.com/url?sa=E&q=https%3A%2F%2Fe2b.dev%2Fdashboard).

---

## Access Token

El token de acceso se usa solo en la CLI y **no es necesario en el SDK**. No hay necesidad de configurarlo al iniciar sesi√≥n en la CLI usando e2b auth login.

> ‚ÑπÔ∏è Para autenticarse sin el navegador, puedes establecer E2B_ACCESS_TOKEN como una variable de entorno. Esto es √∫til para pipelines de CI/CD.
> 

### Where to find Access token

Puedes obtener tu token de acceso en el [dashboard](https://www.google.com/url?sa=E&q=https%3A%2F%2Fe2b.dev%2Fdashboard).

# Analyze data with AI

Puedes usar E2B Sandbox para ejecutar c√≥digo generado por IA para analizar datos. As√≠ es como suele ser el flujo de trabajo de an√°lisis de datos con IA:

1. Tu usuario tiene un conjunto de datos en formato CSV u otros formatos.
2. Le pides al LLM que genere c√≥digo (generalmente Python) basado en los datos del usuario.
3. El sandbox ejecuta el c√≥digo generado por la IA y devuelve los resultados.
4. Muestras los resultados al usuario.

---

## Example: Analyze CSV file with E2B and Claude 3.5 Sonnet

Este breve ejemplo te mostrar√° c√≥mo usar E2B Sandbox para ejecutar c√≥digo generado por IA para analizar datos CSV.

### Table of Contents

1. Install dependencies
2. Set your API keys
3. Download example CSV file
4. Initialize the sandbox and upload the dataset to the sandbox
5. Prepare the method for running AI-generated code
6. Prepare the prompt and initialize Anthropic client
7. Connect the sandbox to the LLM with tool calling
8. Parse the LLM response and run the AI-generated code in the sandbox
9. Save the generated chart
10. Run the code
11. Full final code

### 1. Install dependencies

Instala el SDK de E2B y el SDK de Claude en tu proyecto ejecutando el siguiente comando en tu terminal.

**Terminal (JavaScript & TypeScript)**

Generated bash

      `npm i @e2b/code-interpreter @anthropic-ai/sdk dotenv`

### 2. Set your API keys

1. Obt√©n tu clave API de E2B desde el [Dashboard de E2B](https://www.google.com/url?sa=E&q=https%3A%2F%2Fe2b.dev%2Fdashboard).
2. Obt√©n tu clave API de Claude desde el [Dashboard de API de Claude](https://www.google.com/url?sa=E&q=https%3A%2F%2Fconsole.anthropic.com%2Fdashboard).
3. Pega las claves en tu archivo .env.

**.env**

Generated code

      `E2B_API_KEY=e2b_***
ANTHROPIC_API_KEY=sk-ant-***`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487).

IGNORE_WHEN_COPYING_END

### 3. Download example CSV file

Usaremos el [conjunto de datos de unas 10,000 pel√≠culas](https://www.google.com/url?sa=E&q=https%3A%2F%2Fwww.kaggle.com%2Fdatasets%2Futkarshx27%2Fmovies-dataset) disponible p√∫blicamente.

1. Haz clic en el bot√≥n "Download" en la parte superior de la p√°gina.
2. Selecciona "Download as zip (2 MB)".
3. Descomprime el archivo y deber√≠as ver el archivo dataset.csv. Mu√©velo a la ra√≠z de tu proyecto.

### 4. Initialize the sandbox and upload the dataset to the sandbox

Subiremos el conjunto de datos del tercer paso al sandbox y lo guardaremos como dataset.csv.

**index.ts (JavaScript & TypeScript)**

Generated javascript

      `import 'dotenv/config'
import fs from 'fs'
import { Sandbox } from '@e2b/code-interpreter'

// Create sandbox
const sbx = await Sandbox.create()

// Upload the dataset to the sandbox
const content = fs.readFileSync('dataset.csv')
const datasetPathInSandbox = await sbx.files.write('dataset.csv', content)`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). JavaScript

IGNORE_WHEN_COPYING_END

### 5. Prepare the method for running AI-generated code

Agrega el siguiente c√≥digo al archivo. Aqu√≠ estamos agregando el m√©todo para la ejecuci√≥n del c√≥digo.

**index.ts (JavaScript & TypeScript)**

Generated javascript

      `// ... c√≥digo del paso anterior

async function runAIGeneratedCode(aiGeneratedCode: string) {
  console.log('Running the code in the sandbox...')
  const execution = await sbx.runCode(aiGeneratedCode)
  console.log('Code execution finished!')
  console.log(execution)
}`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). JavaScript

IGNORE_WHEN_COPYING_END

### 6. Prepare the prompt and initialize Anthropic client

El prompt que usaremos describe el conjunto de datos y el an√°lisis que queremos realizar, as√≠:

1. Describe las columnas en el conjunto de datos CSV.
2. Preg√∫ntale al LLM qu√© queremos analizar - aqu√≠ queremos analizar el promedio de votos a lo largo del tiempo. Estamos pidiendo un gr√°fico como salida.
3. Instruye al LLM para que genere c√≥digo Python para el an√°lisis de datos.

**index.ts (JavaScript & TypeScript)**

Generated javascript

      `// ... c√≥digo del paso anterior
import Anthropic from '@anthropic-ai/sdk'

const prompt = `
I have a CSV file about movies. It has about 10k rows. It's saved in the sandbox at ${datasetPathInSandbox}.path
These are the columns:

- 'id': number, id of the movie
- 'original_language': string like "eng", "es", "ko", etc
- 'original_title': string that's name of the movie in the original language
- 'overview': string about the movie
- 'popularity': float, from 0 to 9137.939. It's not normalized at all and there are outliers
- 'release_date': date in the format yyyy-mm-dd
- 'title': string that's the name of the movie in english
- 'vote_average': float number between 0 and 10 that's representing viewers voting average
- 'vote_count': int for how many viewers voted

I want to better understand how the vote average has changed over the years. Write Python code that analyzes the
`

const anthropic = new Anthropic()
console.log('Waiting for the model response...')
const msg = await anthropic.messages.create({
  model: 'claude-3-5-sonnet-20240620',
  max_tokens: 1024,
  messages: [{ role: 'user', content: prompt }],
})`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). JavaScript

IGNORE_WHEN_COPYING_END

### 7. Connect the sandbox to the LLM with tool calling

Usaremos la capacidad de Claude para usar [herramientas (function calling)](https://www.google.com/url?sa=E&q=https%3A%2F%2Fdocs.anthropic.com%2Fen%2Fdocs%2Ftool-use) para ejecutar el c√≥digo en el sandbox.

La forma en que lo haremos es conectando el m√©todo para ejecutar c√≥digo generado por IA que creamos en el paso anterior al modelo de Claude.

Actualiza la inicializaci√≥n del cliente Anthropic para incluir el uso de la herramienta as√≠:

**index.ts (JavaScript & TypeScript)**

Generated javascript

      `// ...

const msg = await anthropic.messages.create({
  model: 'claude-3-5-sonnet-20240620',
  max_tokens: 1024,
  messages: [{ role: 'user', content: prompt }],
  tools: [
    {
      name: 'run_python_code',
      description: 'Run Python code',
      input_schema: {
        type: 'object',
        properties: {
          code: {
            type: 'string',
            description: 'The Python code to run',
          },
        },
        required: ['code'],
      },
    },
  ],
})`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). JavaScript

IGNORE_WHEN_COPYING_END

### 8. Parse the LLM response and run the AI-generated code in the sandbox

Ahora analizaremos el objeto msg para obtener el c√≥digo de la respuesta del LLM basado en la herramienta que creamos en el paso anterior. Una vez que tengamos el c√≥digo, lo pasaremos al m√©todo runAIGeneratedCode que creamos en el paso anterior para ejecutar el c√≥digo en el sandbox.

**index.ts (JavaScript & TypeScript)**

Generated javascript

      `// ... c√≥digo de los pasos anteriores

interface CodeRunToolInput {
  code: string
}

for (const contentBlock of msg.content) {
  if (contentBlock.type === 'tool_use') {
    if (contentBlock.name === 'run_python_code') {
      const code = (contentBlock.input as CodeRunToolInput).code
      console.log(`Will run following code in the sandbox`, code)
      // Execute the code in the sandbox
      await runAIGeneratedCode(code)
    }
  }
}`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). JavaScript

IGNORE_WHEN_COPYING_END

### 9. Save the generated chart

Al ejecutar c√≥digo en el sandbox para an√°lisis de datos, puedes obtener diferentes tipos de resultados. Incluyendo stdout, stderr, gr√°ficos, tablas, errores de texto y m√°s.

En este ejemplo, estamos pidiendo espec√≠ficamente un gr√°fico, por lo que buscaremos el gr√°fico en los resultados.

Vamos a actualizar el m√©todo runAIGeneratedCode para verificar el gr√°fico en los resultados y guardarlo en el archivo.

**index.ts (JavaScript & TypeScript)**

Generated javascript

      `async function runAIGeneratedCode(aiGeneratedCode: string) {
  console.log('Running the code in the sandbox...')
  const execution = await sbx.runCode(aiGeneratedCode)
  console.log('Code execution finished!')

  // First let's check if the code ran successfully.
  if (execution.error) {
    console.error('AI-generated code had an error.')
    console.log(execution.error.name)
    console.log(execution.error.value)
    console.log(execution.error.traceback)
    process.exit(1)
  }

  // Iterate over all the results and specifically check for png files that will represent the chart.
  let resultIdx = 0
  for (const result of execution.results) {
    if (result.png) {
      // Save the png to a file
      // The png is in base64 format.
      fs.writeFileSync(`chart-${resultIdx}.png`, result.png, { encoding: 'base64' })
      console.log(`Chart saved to chart-${resultIdx}.png`)
      resultIdx++
    }
  }
}`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). JavaScript

IGNORE_WHEN_COPYING_END

### 10. Run the code

Ahora puedes ejecutar todo el c√≥digo para ver los resultados.

**Terminal**

Generated bash

      `npx tsx index.ts`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). Bash

IGNORE_WHEN_COPYING_END

Deber√≠as ver el gr√°fico en la ra√≠z de tu proyecto, que se ver√° as√≠:

```
![alt text](https://e2b.dev/docs/code-interpreting/analyze-data/chart.png)
```

### 11. Full final code

(Se omiti√≥ la secci√≥n del c√≥digo final completo ya que todos los fragmentos se han proporcionado en los pasos anteriores y son suficientes para reconstruirlo).

# Create charts & visualizations

E2B Sandbox te permite crear gr√°ficos y visualizaciones ejecutando c√≥digo Python dentro del sandbox con el m√©todo runCode() en JavaScript y el m√©todo run_code() en Python.

Estos gr√°ficos y visualizaciones pueden ser [est√°ticos](https://www.google.com/url?sa=E&q=https%3A%2F%2Fe2b.dev%2Fdocs%2Fcode-interpreting%2Fcharts%2Fstatic-charts) o [interactivos](https://www.google.com/url?sa=E&q=https%3A%2F%2Fe2b.dev%2Fdocs%2Fcode-interpreting%2Fcharts%2Finteractive-charts).

# Static charts

Cada vez que ejecutas c√≥digo Python con el m√©todo runCode() en JavaScript o run_code() en Python, el c√≥digo se ejecuta en un servidor Jupyter sin interfaz gr√°fica (*headless*) dentro del sandbox.

E2B detecta autom√°ticamente cualquier gr√°fico creado con Matplotlib y lo env√≠a de vuelta al cliente como im√°genes codificadas en formato base64. Estas im√°genes son directamente accesibles a trav√©s de los √≠tems de result en el array execution.results.

Aqu√≠ se muestra c√≥mo recuperar un gr√°fico est√°tico del c√≥digo Python ejecutado que contiene un gr√°fico de Matplotlib.

**JavaScript & TypeScript**

Generated javascript

      `import { Sandbox } from '@e2b/code-interpreter'
import fs from 'fs'

const codeToRun = `
import matplotlib.pyplot as plt

plt.plot([1, 2, 3, 4])
plt.ylabel('some numbers')
plt.show()
`
const sandbox = await Sandbox.create()

// Run the code inside the sandbox
const execution = await sandbox.runCode(codeToRun)

// There's only one result in this case - the plot displayed with 'plt.show()'
const firstResult = execution.results[0]

if (firstResult.png) {
  // Save the png to a file. The png is in base64 format.
  fs.writeFileSync('chart.png', firstResult.png, { encoding: 'base64' })
  console.log('Chart saved as chart.png')
}`

El c√≥digo en la variable codeToRun / code_to_run producir√° el siguiente gr√°fico que estamos guardando como el archivo chart.png.

```
![alt text](https://e2b.dev/docs/code-interpreting/charts/static-charts-example.png)
```

# Interactive charts

E2B tambi√©n te permite crear gr√°ficos interactivos con estilos personalizados.

E2B detecta autom√°ticamente los gr√°ficos al ejecutar c√≥digo Python con el m√©todo runCode() en JavaScript o run_code() en Python. El c√≥digo Python debe incluir gr√°ficos de Matplotlib.

Cuando se detecta un gr√°fico, E2B env√≠a los datos del gr√°fico de vuelta al cliente. Puedes acceder al gr√°fico en el array execution.results, donde cada elemento es un objeto Result con la propiedad chart.

> ‚ÑπÔ∏è Prueba AI Data Analyst - una aplicaci√≥n Next.js que usa E2B para crear gr√°ficos interactivos.
> 

Aqu√≠ tienes un ejemplo simple de un gr√°fico de barras:

**JavaScript & TypeScript**

Generated javascript

      `import { Sandbox, BarChart } from '@e2b/code-interpreter'

const code = `
import matplotlib.pyplot as plt

# Prepare data
authors = ['Author A', 'Author B', 'Author C', 'Author D']
sales = [100, 200, 300, 400]

# Create and customize the bar chart
plt.figure(figsize=(10, 6))
plt.bar(authors, sales, label='Books Sold', color='blue')
plt.xlabel('Authors')
plt.ylabel('Number of Books Sold')
plt.title('Book Sales by Authors')

# Display the chart
plt.tight_layout()
plt.show()
`

const sandbox = await Sandbox.create()
const result = await sandbox.runCode(code)
const chart = result.results[0].chart as BarChart

console.log('Type:', chart.type)
console.log('Title:', chart.title)
console.log('X Label:', chart.x_label)
console.log('Y Label:', chart.y_label)
console.log('X Unit:', chart.x_unit)
console.log('Y Unit:', chart.y_unit)
console.log('Elements:', chart.elements)`

El c√≥digo anterior producir√° la siguiente salida:

**Terminal**

Generated code

      `Type: bar
Title: Book Sales by Authors
X Label: Authors
Y Label: Number of Books Sold
X Unit: null
Y Unit: null
Elements: [
  {
    label: "Author A",
    group: "Books Sold",
    value: 100,
  },
  {
    label: "Author B",
    group: "Books Sold",
    value: 200,
  },
  {
    label: "Author C",
    group: "Books Sold",
    value: 300,
  },
  {
    label: "Author D",
    group: "Books Sold",
    value: 400,
  }
]`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487).

IGNORE_WHEN_COPYING_END

Puedes enviar estos datos a tu frontend para crear un gr√°fico interactivo con tu librer√≠a de gr√°ficos favorita.

## Supported interactive charts

Los siguientes gr√°ficos son soportados actualmente:

- Gr√°fico de l√≠neas
- Gr√°fico de barras
- Gr√°fico de dispersi√≥n
- Gr√°fico circular
- Diagrama de caja y bigotes

# Streaming

El SDK de E2B te permite transmitir la salida y los resultados al ejecutar c√≥digo en el sandbox.

## Stream stdout y stderr

Al usar el m√©todo runCode() en JavaScript o run_code() en Python, puedes pasar los callbacks onStdout / on_stdout y onStderr / on_stderr para manejar la salida.

**JavaScript & TypeScript**

Generated javascript

      `import { Sandbox } from '@e2b/code-interpreter'

const codeToRun = `
import time
import sys
print("This goes first to stdout")
time.sleep(3)
print("This goes later to stderr", file=sys.stderr)
time.sleep(3)
print("This goes last")
`
const sandbox = await Sandbox.create()
sandbox.runCode(codeToRun, {
  // Usa `onError` para manejar errores de c√≥digo en tiempo de ejecuci√≥n
  onError: error => console.error('error:', error),
  onStdout: data => console.log('stdout:', data),
  onStderr: data => console.error('stderr:', data),
})`

El c√≥digo anterior imprimir√° lo siguiente:

Generated code

      `stdout: This goes first to stdout

stderr: This goes later to stderr

stdout: This goes last`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487).

IGNORE_WHEN_COPYING_END

---

## Stream results

Al usar el m√©todo runCode() en JavaScript o run_code() en Python, puedes pasar un callback onResults / on_results para recibir resultados del sandbox como gr√°ficos, tablas, texto y m√°s.

**JavaScript & TypeScript**

Generated javascript

      `const codeToRun = `
import matplotlib.pyplot as plt

# Preparar datos
categories = ['Category A', 'Category B', 'Category C', 'Category D']
values = [10, 20, 15, 25]

# Crear y personalizar el gr√°fico de barras
plt.figure(figsize=(10, 6))
plt.bar(categories, values, color='green')
plt.xlabel('Categories')
plt.ylabel('Values')
plt.title('Values by Category')

# Mostrar el gr√°fico
plt.show()
`
const sandbox = await Sandbox.create()
await sandbox.runCode(codeToRun, {
  onResult: result => console.log('result:', result),
})`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). JavaScript

IGNORE_WHEN_COPYING_END

# Sandbox lifecycle

Cuando inicias el sandbox, permanece activo durante 5 minutos por defecto, pero puedes cambiarlo pasando el par√°metro timeout. Despu√©s de que pase el tiempo, el sandbox se apagar√° autom√°ticamente.

**JavaScript & TypeScript**

Generated javascript

      `import { Sandbox } from '@e2b/code-interpreter'

// Crear sandbox y mantenerlo en ejecuci√≥n durante 60 segundos.
// üèÉ‚Äç‚ôÄÔ∏è Nota: Las unidades son milisegundos.
const sandbox = await Sandbox.create({
  timeoutMs: 60_000,
})`

## Change sandbox timeout during runtime

Puedes cambiar el tiempo de espera del sandbox mientras se est√° ejecutando llamando al m√©todo setTimeout en JavaScript o set_timeout en Python.

Cuando llamas al m√©todo de establecer tiempo de espera, el tiempo de espera del sandbox se restablecer√° al nuevo valor que especificaste.

Esto puede ser √∫til si quieres extender la vida √∫til del sandbox cuando ya est√° en ejecuci√≥n. Por ejemplo, puedes iniciar un sandbox con un tiempo de espera de 1 minuto y luego llamar peri√≥dicamente a setTimeout cada vez que el usuario interact√∫a con tu aplicaci√≥n.

**JavaScript & TypeScript**

Generated javascript

      `import { Sandbox } from '@e2b/code-interpreter'

// Crear sandbox y mantenerlo en ejecuci√≥n durante 60 segundos.
const sandbox = await Sandbox.create({ timeoutMs: 60_000 })

// Cambiar el tiempo de espera del sandbox a 30 segundos.
// üèÉ‚Äç‚ôÄÔ∏è El nuevo tiempo de espera ser√° de 30 segundos a partir de ahora.
await sandbox.setTimeout(30_000)`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). JavaScript

IGNORE_WHEN_COPYING_END

## Retrieve sandbox information

Puedes recuperar informaci√≥n del sandbox como el ID, la plantilla, los metadatos y la fecha de inicio/fin llamando al m√©todo getInfo en JavaScript o get_info en Python.

**JavaScript & TypeScript**

Generated javascript

      `import { Sandbox } from '@e2b/code-interpreter'

// Crear sandbox y mantenerlo en ejecuci√≥n durante 60 segundos.
const sandbox = await Sandbox.create({ timeoutMs: 60_000 })

// Recuperar informaci√≥n del sandbox
const info = await sandbox.getInfo()

console.log(info)
/* {
  "sandboxId": "i1ny0783cype8gmoawizmx-ce30bc46",
  "templateId": "rki5dems9wqfm4r03t7g",
  "name": "base",
  "metadata": {},
  "startedAt": "2025-03-24T15:37:58.076Z",
  "endAt": "2025-03-24T15:42:58.076Z"
} */`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). JavaScript

IGNORE_WHEN_COPYING_END

## Shutdown sandbox

Puedes apagar el sandbox en cualquier momento, incluso antes de que se agote el tiempo de espera, llamando al m√©todo kill.

**JavaScript & TypeScript**

Generated javascript

      `import { Sandbox } from '@e2b/code-interpreter'

// Crear sandbox y mantenerlo en ejecuci√≥n durante 60 segundos.
const sandbox = await Sandbox.create({ timeoutMs: 60_000 })

// Apagar el sandbox inmediatamente.
await sandbox.kill()`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). JavaScript

IGNORE_WHEN_COPYING_END

# Sandbox persistence

> ‚ÑπÔ∏è La persistencia del sandbox est√° actualmente en beta p√∫blica.
> 
> 1. Necesitar√°s instalar la [versi√≥n beta de los SDKs](https://www.google.com/url?sa=E&q=https%3A%2F%2Fe2b.dev%2Fdocs%2Fsandbox%2Fpersistence%23limitations-while-in-beta).
> 2. Considera [algunas limitaciones](https://www.google.com/url?sa=E&q=https%3A%2F%2Fe2b.dev%2Fdocs%2Fsandbox%2Fpersistence%23limitations-while-in-beta).
> 3. La persistencia es gratuita para todos los usuarios durante la beta.

La persistencia del sandbox te permite pausar tu sandbox y reanudarlo m√°s tarde desde el mismo estado en que lo pausaste.

Esto incluye no solo el estado del sistema de archivos del sandbox, sino tambi√©n la memoria del sandbox. Esto significa que todos los procesos en ejecuci√≥n, variables cargadas, datos, etc., se guardar√°n.

## Pausing sandbox

Cuando pausas un sandbox, se guardar√° tanto el sistema de archivos como el estado de la memoria del sandbox. Esto incluye todos los archivos en el sistema de archivos del sandbox y todos los procesos en ejecuci√≥n, variables cargadas, datos, etc.

**JavaScript & TypeScript**

Generated javascript

      `import { Sandbox } from '@e2b/code-interpreter'

const sbx = await Sandbox.create()
console.log('Sandbox created', sbx.sandboxId)

// Pausar el sandbox
// Puedes guardar el ID del sandbox en tu base de datos
// para reanudar el sandbox m√°s tarde
const sandboxId = await sbx.pause()
console.log('Sandbox paused', sandboxId)`

## Resuming sandbox

Cuando reanudas un sandbox, estar√° en el mismo estado en que estaba cuando lo pausaste. Esto significa que todos los archivos en el sistema de archivos del sandbox ser√°n restaurados y todos los procesos en ejecuci√≥n, variables cargadas, datos, etc., ser√°n restaurados.

**JavaScript & TypeScript**

Generated javascript

      `import { Sandbox } from '@e2b/code-interpreter'

const sbx = await Sandbox.create()
console.log('Sandbox created', sbx.sandboxId)

// Pausar el sandbox
// Puedes guardar el ID del sandbox en tu base de datos
// para reanudar el sandbox m√°s tarde
const sandboxId = await sbx.pause()
console.log('Sandbox paused', sandboxId)

// Reanudar el sandbox desde el mismo estado
const sameSbx = await Sandbox.resume(sandboxId)
console.log('Sandbox resumed', sameSbx.sandboxId)`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). JavaScript

IGNORE_WHEN_COPYING_END

## Listing paused sandboxes

Puedes listar todos los sandboxes pausados llamando al m√©todo Sandbox.list y proporcionando el par√°metro de consulta state. M√°s informaci√≥n sobre el uso del m√©todo se puede encontrar en [Listar Sandboxes](https://www.google.com/url?sa=E&q=https%3A%2F%2Fe2b.dev%2Fdocs%2Fsandbox%2Flist-sandboxes).

**JavaScript & TypeScript**

Generated javascript

      `import { Sandbox, SandboxInfo } from '@e2b/code-interpreter'

// Listar todos los sandboxes pausados
const paginator = Sandbox.list({ query: { state: ['paused'] } })

// Obtener la primera p√°gina de sandboxes pausados
const sandboxes = await paginator.nextItems()

// Obtener todos los sandboxes pausados
const sandboxInfo: SandboxInfo[] = []
while (paginator.hasNext) {
  const items = await paginator.nextItems()
  sandboxes.push(...items)
}`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). JavaScript

IGNORE_WHEN_COPYING_END

## Removing paused sandboxes

Puedes eliminar sandboxes pausados llamando al m√©todo kill en la instancia del Sandbox.

**JavaScript & TypeScript**

Generated javascript

      `import { Sandbox } from '@e2b/code-interpreter'

const sbx = await Sandbox.create()
console.log('Sandbox created', sbx.sandboxId)

// Pausar el sandbox
// Puedes guardar el ID del sandbox en tu base de datos
// para reanudar el sandbox m√°s tarde
const sandboxId = await sbx.pause()

// Eliminar sandbox
await sbx.kill()

// Eliminar sandbox por id
await Sandbox.kill(sandboxId)`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). JavaScript

IGNORE_WHEN_COPYING_END

## Sandbox's timeout

Cuando reanudas un sandbox, el tiempo de espera del sandbox se restablece al tiempo de espera predeterminado de un sandbox de E2B: 5 minutos.

Puedes pasar un tiempo de espera personalizado al m√©todo Sandbox.resume() de esta manera:

**JavaScript & TypeScript**

Generated javascript

      `const sbx = await Sandbox.resume(sandboxId, { timeoutMs: 60 * 1000 }) // 60 segundos`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). JavaScript

IGNORE_WHEN_COPYING_END

## Network

Si tienes un servicio (por ejemplo, un servidor) ejecut√°ndose dentro de tu sandbox y pausas el sandbox, el servicio no ser√° accesible desde el exterior y todos los clientes ser√°n desconectados. Si reanudas el sandbox, el servicio ser√° accesible de nuevo, pero necesitar√°s que los clientes se conecten nuevamente.

## Limitations while in beta

- Tarda unos 4 segundos por 1 GB de RAM en pausar el sandbox.
- Tarda aproximadamente 1 segundo en reanudar el sandbox.
- El sandbox puede estar en pausa hasta 30 d√≠as.
    - Despu√©s de 30 d√≠as, los datos se eliminar√°n y no podr√°s reanudar el sandbox. Intentar reanudar un sandbox que fue eliminado o no existe resultar√° en el error NotFoundError en el SDK de JavaScript y la excepci√≥n NotFoundException en el SDK de Python.

# Sandbox metrics

> ‚ÑπÔ∏è Esta caracter√≠stica est√° en una beta privada.
> 

Las m√©tricas del sandbox te permiten obtener informaci√≥n sobre el uso de CPU y memoria del sandbox.

## Installation

Para obtener las m√©tricas del sandbox, necesitas instalar la versi√≥n beta de los SDKs y la CLI:

- Instalando los SDKs beta
- Instalando la CLI beta

## Getting sandbox metrics

Obtener las m√©tricas de un sandbox devuelve un array de m√©tricas con marca de tiempo que contienen informaci√≥n sobre el uso de CPU y memoria. Las m√©tricas se recopilan al inicio del sandbox, luego cada 2 segundos, y finalmente justo antes de que el sandbox se elimine.

### Getting sandbox metrics using the SDKs

**JavaScript & TypeScript**

Generated javascript

      `import { Sandbox } from '@e2b/code-interpreter'

const sbx = await Sandbox.create()
console.log('Sandbox created', sbx.sandboxId)

const metrics = await sbx.getMetrics()

// Tambi√©n puedes obtener las m√©tricas por el ID del sandbox:
// const metrics = await Sandbox.getMetrics(sbx.sandboxId)

console.log('Sandbox metrics:', metrics)
/*
[
  {
    cpuCount: 2,
    cpuUsedPct: 50.05,
    memTotalMiB: 484,
    memUsedMiB: 37,
    timestamp: '2025-01-23T23:44:12.222Z'
  },
  {
    cpuCount: 2,
    cpuUsedPct: 4.5,
    memTotalMiB: 484,
    memUsedMiB: 37,
    timestamp: '2025-01-23T23:44:13.220Z'
  }
]
*/`

### Getting sandbox metrics using the CLI

**Terminal**

Generated bash

      `e2b sandbox metrics <sandbox_id>`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). Bash

IGNORE_WHEN_COPYING_END

Generated code

      `# Metrics for sandbox <sandbox_id>
#
# [2025-01-23 09:58:58.829Z] { cpuCount: 2, cpuUsedPct: 50.21, logger: '', memTotalMiB: 484, memUsedMiB: 38, timestamp: ... }
# [2025-01-23 09:59:00.814Z] { cpuCount: 2, cpuUsedPct: 5.16, logger: '', memTotalMiB: 484, memUsedMiB: 37, timestamp: ... }
# [2025-01-23 09:59:08.815Z] { cpuCount: 2, cpuUsedPct: 1.6, logger: '', memTotalMiB: 484, memUsedMiB: 37, timestamp: ... }`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487).

IGNORE_WHEN_COPYING_END

## Limitations while in beta

- Puede tardar un segundo o m√°s en obtener las m√©tricas despu√©s de crear el sandbox. Hasta que los registros se recopilen desde el sandbox, obtendr√°s un array vac√≠o.

# Environment variables

Esta p√°gina cubre c√≥mo establecer y usar variables de entorno en un sandbox, y las variables de entorno predeterminadas dentro del sandbox.

## Default environment variables

### Knowing if you are inside a sandbox

A veces es √∫til saber si el c√≥digo se est√° ejecutando dentro de un sandbox. Al crear un sandbox, se establecen como variables de entorno para los comandos, metadatos √∫tiles del sandbox:

- E2B_SANDBOX se establece a true para que los procesos sepan si est√°n dentro de nuestra VM.
- E2B_SANDBOX_ID para conocer el ID del sandbox.
- E2B_TEAM_ID para conocer el ID del equipo que cre√≥ el sandbox.
- E2B_TEMPLATE_ID para saber qu√© plantilla se us√≥ para el sandbox actual.

Puedes probarlo ejecutando el siguiente c√≥digo en el sandbox:

**JavaScript & TypeScript**

Generated javascript

      `const sandbox = await Sandbox.create()
const result = await sandbox.commands.run('echo $E2B_SANDBOX_ID')`

> ‚ÑπÔ∏è Estas variables de entorno predeterminadas solo son accesibles a trav√©s del SDK; al usar la CLI, puedes encontrarlas en forma de archivos dot en el directorio /run/e2b/:
> 
> 
>       `user@e2b:~$ ls -a /run/e2b/
> .E2B_SANDBOX  .E2B_SANDBOX_ID  .E2B_TEAM_ID  .E2B_TEMPLATE_ID`
> 
> IGNORE_WHEN_COPYING_START
> 
> content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). Bash
> 
> IGNORE_WHEN_COPYING_END
> 

## Setting environment variables

Hay 3 formas de establecer variables de entorno en un sandbox:

1. [Variables de entorno globales al crear el sandbox](https://www.google.com/url?sa=E&q=%231-global-environment-variables).
2. [Al ejecutar c√≥digo en el sandbox](https://www.google.com/url?sa=E&q=%232-setting-environment-variables-when-running-code).
3. [Al ejecutar comandos en el sandbox](https://www.google.com/url?sa=E&q=%233-setting-environment-variables-when-running-commands).

### 1. Global environment variables

Puedes establecer variables de entorno globales al crear un sandbox.

**JavaScript & TypeScript**

Generated javascript

      `import { Sandbox } from '@e2b/code-interpreter'

const sandbox = await Sandbox.create({
  envs: {
    MY_VAR: 'my_value',
  },
})`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). JavaScript

IGNORE_WHEN_COPYING_END

### 2. Setting environment variables when running code

Puedes establecer variables de entorno para una llamada de ejecuci√≥n de c√≥digo espec√≠fica en el sandbox. Esto se recomienda para pasar secretos.

- Estas variables de entorno est√°n limitadas de forma segura al comando y no ser√°n globales ni accesibles dentro del sandbox o para comandos posteriores.
- Si ten√≠as una variable de entorno global con el mismo nombre, ser√° sobrescrita solo para este comando.

**JavaScript & TypeScript**

Generated javascript

      `const sandbox = await Sandbox.create()
const result = await sandbox.runCode('import os; print(os.environ.get("MY_VAR"))', {
  envs: {
    MY_VAR: 'my_value',
  },
})`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). JavaScript

IGNORE_WHEN_COPYING_END

### 3. Setting environment variables when running commands

Puedes establecer variables de entorno para una ejecuci√≥n de comando espec√≠fica en el sandbox. Esto se recomienda para pasar secretos.

- Estas variables de entorno est√°n limitadas de forma segura al comando y no ser√°n globales ni accesibles dentro del sandbox o para comandos posteriores.
- Si ten√≠as una variable de entorno global con el mismo nombre, ser√° sobrescrita solo para este comando.

**JavaScript & TypeScript**

Generated javascript

      `const sandbox = await Sandbox.create()
sandbox.commands.run('echo $MY_VAR', {
  envs: {
    MY_VAR: '123',
  },
})`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). JavaScript

IGNORE_WHEN_COPYING_END

# List sandboxes

Puedes listar sandboxes usando el m√©todo Sandbox.list().

> ‚ÑπÔ∏è Una vez que tienes informaci√≥n sobre un sandbox en ejecuci√≥n, puedes conectarte a √©l usando el m√©todo Sandbox.connect().
> 

**JavaScript & TypeScript**

Generated javascript

      `import { Sandbox } from '@e2b/code-interpreter'

// Crear un sandbox.
const sandbox = await Sandbox.create({
  metadata: {
    name: 'My Sandbox',
  },
})

// Listar todos los sandboxes en ejecuci√≥n.
const runningSandboxes = await Sandbox.list()
const runningSandbox = runningSandboxes[0]

console.log('Running sandbox metadata:', runningSandbox.metadata)
console.log('Running sandbox id:', runningSandbox.sandboxId)
console.log('Running sandbox started at:', runningSandbox.startedAt)
console.log('Running sandbox template id:', runningSandbox.templateId)`

El c√≥digo anterior mostrar√° algo como esto:

Generated code

      `Running sandbox metadata: {
  name: "My Sandbox"
}
Running sandbox id: lxfj3iankaishgcge4jwn-b0b684e9
Running sandbox started at: 2024-10-15T21:13:07.311Z
Running sandbox template id: 3e4rngfa34txe0gxcizf`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487).

IGNORE_WHEN_COPYING_END

## Filtering sandboxes

Puedes filtrar sandboxes especificando pares de clave-valor de [Metadatos](https://www.google.com/url?sa=E&q=https%3A%2F%2Fe2b.dev%2Fdocs%2Fsandbox%2Fmetadata). Especificar m√∫ltiples pares de clave-valor devolver√° sandboxes que coincidan con todos ellos.

Esto puede ser √∫til cuando tienes un gran n√∫mero de sandboxes y quieres encontrar solo unos espec√≠ficos. El filtrado se realiza en el servidor.

**JavaScript & TypeScript**

Generated javascript

      `import { Sandbox } from '@e2b/code-interpreter'

// Crear sandbox con metadatos.
const sandbox = await Sandbox.create({
  metadata: {
    env: 'dev',
    app: 'my-app',
    userId: '123',
  },
})

// Listar los sandboxes en ejecuci√≥n que tienen la clave 'userId' con valor '123' y la clave 'env' con valor 'dev'.
const runningSandboxes = await Sandbox.list({
  query: {
    metadata: { userId: '123', env: 'dev' },
  },
})`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). JavaScript

IGNORE_WHEN_COPYING_END

---

## Changes in the Beta SDKs

> ‚ÑπÔ∏è Si est√°s usando la versi√≥n beta del SDK, el m√©todo Sandbox.list() fue actualizado.
> 

### Listing sandboxes

El m√©todo Sandbox.list() ahora soporta paginaci√≥n. En la secci√≥n de [paginaci√≥n avanzada](https://www.google.com/url?sa=E&q=%23advanced-pagination) puedes encontrar m√°s informaci√≥n sobre t√©cnicas de paginaci√≥n usando el m√©todo actualizado.

**JavaScript & TypeScript**

Generated javascript

      `import { Sandbox, SandboxInfo } from '@e2b/code-interpreter'

const sandbox = await Sandbox.create()

const paginator = Sandbox.list()

// Obtener la primera p√°gina de sandboxes (en ejecuci√≥n y pausados)
const firstPage = await paginator.nextItems()

// Obtener la siguiente p√°gina de sandboxes
const nextPage = await paginator.nextItems()`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). JavaScript

IGNORE_WHEN_COPYING_END

### Filtering sandboxes

Filtra los sandboxes por su estado actual. El par√°metro state puede contener running para sandboxes en ejecuci√≥n o paused para sandboxes pausados, o ambos.

**JavaScript & TypeScript**

Generated javascript

      `import { Sandbox } from '@e2b/code-interpreter'

// Crear un sandbox.
const sandbox = await Sandbox.create()

// Listar todos los sandboxes que est√°n en ejecuci√≥n o pausados.
const paginator = Sandbox.list({
  query: {
    state: ['running', 'paused'],
  },
})

const sandboxes = await paginator.nextItems()`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). JavaScript

IGNORE_WHEN_COPYING_END

Filtra los sandboxes por los pares de clave-valor de metadatos especificados durante la creaci√≥n del Sandbox.

**JavaScript & TypeScript**

Generated javascript

      `import { Sandbox } from '@e2b/code-interpreter'

// Crear sandbox con metadatos.
const sandbox = await Sandbox.create({
  metadata: {
    env: 'dev',
    app: 'my-app',
    userId: '123',
  },
})

// Listar sandboxes que tienen la clave 'userId' con valor '123' y la clave 'env' con valor 'dev'.
const paginator = Sandbox.list({
  query: {
    metadata: { userId: '123', env: 'dev' },
  },
})

const sandboxes = await paginator.nextItems()`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). JavaScript

IGNORE_WHEN_COPYING_END

### Advanced pagination

Para una paginaci√≥n m√°s granular, puedes establecer un l√≠mite de elementos por p√°gina personalizado (el predeterminado y m√°ximo es **1000**) y especificar un par√°metro de desplazamiento (nextToken o next_token) para empezar a paginar desde ah√≠.

**JavaScript & TypeScript**

Generated javascript

      `import { Sandbox } from '@e2b/code-interpreter'

const paginator = Sandbox.list({
  limit: 1000,
  nextToken: '<base64-encoded-token>',
})

// Propiedades adicionales del paginador
// `paginator.hasNext` // booleano que indica si hay una p√°gina siguiente

// Token de la p√°gina siguiente
// `paginator.nextToken`

// Obtener la p√°gina siguiente
await paginator.nextItems()`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). JavaScript

IGNORE_WHEN_COPYING_END

Puedes obtener todas las p√°ginas recorriendo el paginador mientras se comprueba si hay una p√°gina siguiente (usando la propiedad hasNext o has_next) y obteniendo hasta que no queden m√°s p√°ginas por obtener.

**JavaScript & TypeScript**

Generated javascript

      `import { Sandbox, SandboxInfo } from '@e2b/code-interpreter'

const paginator = Sandbox.list()

// Recorrer todas las p√°ginas
const sandboxes: SandboxInfo[] = []
while (paginator.hasNext) {
  const items = await paginator.nextItems()
  sandboxes.push(...items)
}`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). JavaScript

IGNORE_WHEN_COPYING_END

# Connect to running sandbox

Si tienes un sandbox en ejecuci√≥n, puedes conectarte a √©l usando el m√©todo Sandbox.connect() y luego comenzar a controlarlo con nuestro SDK.

Esto es √∫til si quieres, por ejemplo, reutilizar la misma instancia de sandbox para el mismo usuario despu√©s de un corto per√≠odo de inactividad.

## 1. Get the sandbox ID

Para conectarte a un sandbox en ejecuci√≥n, primero necesitas obtener su ID. Puedes hacer esto llamando al m√©todo Sandbox.list().

> ‚ÑπÔ∏è Si est√°s usando la versi√≥n beta de los SDKs, el m√©todo Sandbox.list() fue actualizado. Consulta Listar Sandboxes para m√°s informaci√≥n.
> 

**JavaScript & TypeScript**

Generated javascript

      `import { Sandbox } from '@e2b/code-interpreter'

// Obtener todos los sandboxes en ejecuci√≥n
const runningSandboxes = await Sandbox.list()

if (runningSandboxes.length === 0) {
  throw new Error("No running sandboxes found")
}

// Obtener el ID del sandbox al que quieres conectarte
const sandboxId = runningSandboxes[0].sandboxId`

## 2. Connect to the sandbox

Ahora que tienes el ID del sandbox, puedes conectarte al sandbox usando el m√©todo Sandbox.connect().

**JavaScript & TypeScript**

Generated javascript

      `import { Sandbox } from '@e2b/code-interpreter'

// Obtener todos los sandboxes en ejecuci√≥n
const runningSandboxes = await Sandbox.list()

if (runningSandboxes.length === 0) {
  throw new Error("No running sandboxes found")
}

// Obtener el ID del sandbox al que quieres conectarte
const sandboxId = runningSandboxes[0].sandboxId

// Conectarse al sandbox
const sandbox = await Sandbox.connect(sandboxId)

// Ahora puedes usar el sandbox como de costumbre
// ...`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). JavaScript

IGNORE_WHEN_COPYING_END

# Internet access

Cada sandbox tiene acceso a internet y puede ser alcanzado por una URL p√∫blica.

## Sandbox public URL

Cada sandbox tiene una URL p√∫blica que puede ser utilizada para acceder a servicios en ejecuci√≥n dentro del sandbox.

**JavaScript & TypeScript**

Generated javascript

      `import { Sandbox } from '@e2b/code-interpreter'

const sandbox = await Sandbox.create()

// Siempre necesitas pasar un n√∫mero de puerto para obtener el host
const host = sandbox.getHost(3000)
console.log(`https://\${host}`)`

El c√≥digo anterior imprimir√° algo como esto:

Generated code

      `https://3000-i62mff4ahtrdfdkyn2esc-b0b684e9.e2b.dev`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487).

IGNORE_WHEN_COPYING_END

La primera parte m√°s a la izquierda del host es el n√∫mero de puerto que pasamos al m√©todo.

## Connecting to a server running inside the sandbox

Puedes iniciar un servidor dentro del sandbox y conectarte a √©l usando el enfoque anterior.

En este ejemplo, iniciaremos un servidor HTTP simple que escucha en el puerto 3000 y responde con el contenido del directorio donde se inicia el servidor.

**JavaScript & TypeScript**

Generated javascript

      `import { Sandbox } from '@e2b/code-interpreter'

const sandbox = await Sandbox.create()

// Iniciar un servidor HTTP simple dentro del sandbox.
const process = await sandbox.commands.run('python -m http.server 3000', { background: true })

const host = sandbox.getHost(3000)
const url = `https://\${host}`
console.log('Server started at:', url)

// Obtener datos del servidor dentro del sandbox.
const response = await fetch(url)
const data = await response.text()
console.log('Response from server inside sandbox:', data)

// Matar el proceso del servidor dentro del sandbox.
await process.kill()`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). JavaScript

IGNORE_WHEN_COPYING_END

Esta salida se ver√° as√≠:

Generated html

      `Server started at: https://3000-ip3nfrvajtqu5ktoxugc7-b0b684e9.e2b.dev
Response from server inside sandbox: <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Directory listing for /</title>
</head>
<body>
<h1>Directory listing for /</h1>
<hr>
<ul>
<li><a href=".bash_logout">.bash_logout</a></li>
<li><a href=".bashrc">.bashrc</a></li>
<li><a href=".profile">.profile</a></li>
</ul>
<hr>
</body>
</html>`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). Html

IGNORE_WHEN_COPYING_END

# Sandbox templates

Las plantillas de sandbox te permiten personalizar el entorno del sandbox seg√∫n tus necesidades.

Para crear una plantilla de sandbox, especificas el archivo e2b.Dockerfile. Luego tomamos este Dockerfile y creamos una nueva plantilla de sandbox a partir de √©l y te devolvemos un ID de plantilla.

Luego puedes usar este ID de plantilla para crear un nuevo sandbox con el SDK basado en la plantilla que creaste.

## How to create custom sandbox

### Steps

1. [Install E2B CLI](https://www.google.com/url?sa=E&q=%231-install-e2b-cli)
2. [Initialize sandbox template](https://www.google.com/url?sa=E&q=%232-initialize-sandbox-template)
3. [Customize e2b.Dockerfile](https://www.google.com/url?sa=E&q=%233-customize-e2bdockerfile)
4. [Build your sandbox template](https://www.google.com/url?sa=E&q=%234-build-your-sandbox-template)
5. [Start your custom sandbox](https://www.google.com/url?sa=E&q=%235-start-your-custom-sandbox)

### 1. Install E2B CLI

**Using Homebrew (on macOS)**

Generated bash

      `brew install e2b`

**Using NPM**

Generated bash

      `npm i -g @e2b/cli`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). Bash

IGNORE_WHEN_COPYING_END

### 2. Initialize sandbox template

El siguiente comando crear√° un e2b.Dockerfile b√°sico en el directorio actual.

Generated bash

      `e2b template init`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). Bash

IGNORE_WHEN_COPYING_END

### 3. Customize e2b.Dockerfile

Ahora puedes personalizar tu plantilla de sandbox editando el archivo e2b.Dockerfile.

**e2b.Dockerfile**

Generated dockerfile

      `# Aseg√∫rate de usar esta imagen base
FROM e2bdev/code-interpreter:latest

# Instala algunos paquetes de Python
RUN pip install cowsay`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). Dockerfile

IGNORE_WHEN_COPYING_END

### 4. Build your sandbox template

Ahora puedes construir tu plantilla de sandbox. Usaremos Docker y la CLI de E2B. Lo que suceder√° es que la CLI de E2B le dir√° a Docker que construya la imagen y luego la suba a la nube de E2B. Luego convertimos la imagen de Docker a una VM micro que luego se puede lanzar como un sandbox con nuestro SDK.

Generated bash

      `e2b template build -c "/root/.jupyter/start-up.sh"`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). Bash

IGNORE_WHEN_COPYING_END

Este proceso tomar√° un momento. Al final, ver√°s el ID de la plantilla que necesitar√°s para crear un sandbox con el SDK.

### 5. Start your custom sandbox

Ahora puedes usar el ID de la plantilla para crear un sandbox con el SDK.

**JavaScript & TypeScript**

Generated javascript

      `import { Sandbox } from '@e2b/code-interpreter'

// ID de la plantilla del paso anterior
const templateID = 'id-of-your-template'

// Pasa el ID de la plantilla al m√©todo `Sandbox.create`
const sandbox = await Sandbox.create(templateID)

// La plantilla instal√≥ cowsay, as√≠ que podemos usarlo
const execution = await sandbox.runCode(`
import cowsay
cowsay.say('Hello from E2B!')
`)

console.log(execution.stdout)`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). JavaScript

IGNORE_WHEN_COPYING_END

## How it works

Cada vez que construyes una plantilla de sandbox, creamos un contenedor basado en el archivo e2b.Dockerfile que creas en el proceso. Extraemos el sistema de archivos del contenedor, hacemos el aprovisionamiento y la configuraci√≥n (por ejemplo, instalando las dependencias requeridas) e iniciamos un sandbox.

Luego, ocurren estos pasos:

1. Tomamos el sandbox en ejecuci√≥n.
2. (Solo si especificaste el [comando de inicio](https://www.google.com/url?sa=E&q=https%3A%2F%2Fe2b.dev%2Fdocs%2Ftemplates%2Fstart-command), de lo contrario, este paso se omite) Ejecuta el comando de inicio.
3. Espera a que est√© listo (por defecto 20 segundos si se especifica el comando de inicio, de lo contrario, est√° listo inmediatamente). La comprobaci√≥n de preparaci√≥n se puede configurar usando el [comando de preparaci√≥n](https://www.google.com/url?sa=E&q=https%3A%2F%2Fe2b.dev%2Fdocs%2Ftemplates%2Fready-command).
4. Toma una instant√°nea del sandbox y d√©jalo listo para que lo generes con el SDK.

Llamamos a esta instant√°nea del sandbox una **plantilla de sandbox**.

> ‚ÑπÔ∏è Sandbox Snapshot
> 
> 
> Las instant√°neas son sandboxes en ejecuci√≥n guardados. Serializamos y guardamos todo el sistema de archivos del sandbox junto con todos los procesos en ejecuci√≥n de una manera que se puede cargar m√°s tarde.
> 
> Esto nos permite cargar el sandbox en unos pocos cientos de milisegundos m√°s tarde con todos los procesos ya en ejecuci√≥n y el sistema de archivos exactamente como estaba.
> 

# Start Command

El comando de inicio te permite especificar un comando que ya estar√° **en ejecuci√≥n** cuando generes tu sandbox personalizado. De esta manera, puedes, por ejemplo, tener servidores ejecut√°ndose o bases de datos sembradas que ya est√©n completamente listas cuando generes el sandbox usando el SDK y con cero tiempo de espera para tus usuarios durante el tiempo de ejecuci√≥n.

La idea detr√°s de la funci√≥n de comando de inicio es reducir los tiempos de espera para tus usuarios y tener todo listo para ellos cuando generes tu sandbox.

Puedes ver c√≥mo funciona [aqu√≠](https://www.google.com/url?sa=E&q=https%3A%2F%2Fe2b.dev%2Fdocs%2Ftemplates%2Foverview%23how-it-works).

## How to add start command

Cuando est√°s construyendo una plantilla de sandbox puedes especificar el comando de inicio usando la opci√≥n -c:

Generated bash

      `e2b template build -c "<your-start-command>"`

Cuando generes el sandbox personalizado que construiste, el comando de inicio ya estar√° en ejecuci√≥n si no hubo ning√∫n error cuando intentamos ejecutarlo.

## Sandbox template config

Puedes especificar el comando de inicio tambi√©n dentro del archivo e2b.toml en el mismo directorio donde ejecutas e2b template build.

**e2b.toml**

Generated toml

      `# Este es un archivo de configuraci√≥n para la plantilla de sandbox de E2B
template_id = "lwdqsf91e9qk21ztb4mo"
dockerfile = "e2b.Dockerfile"
template_name = "my-agent-sandbox"
start_cmd = "<your-start-command>"`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). Toml

IGNORE_WHEN_COPYING_END

## Logs

Puedes recuperar los logs del comando de inicio usando el SDK durante el tiempo de ejecuci√≥n.

> ‚ÑπÔ∏è Estos son los logs del comando de inicio durante la fase de construcci√≥n.
> 

**JavaScript & TypeScript**

Generated javascript

      `// Comprobar los logs del comando de inicio
import { Sandbox } from 'e2b'

// Generar tu sandbox personalizado
const sandbox = await Sandbox.create({
  id: 'my-agent-sandbox',
  // Si especificas los manejadores onStderr y onStdout al generar el sandbox
  // ver√°s los logs del comando de inicio.
  onStderr: output => console.log("stderr", output.line),
  onStdout: output => console.log("stdout", output.line),
})

// Cerrar el sandbox una vez hecho
await sandbox.close()`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). JavaScript

IGNORE_WHEN_COPYING_END

O puedes usar la CLI:

**Terminal**

Generated bash

      `e2b sandbox logs <sandbox-id>`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). Bash

IGNORE_WHEN_COPYING_END

# Ready Command

El comando de preparaci√≥n te permite especificar un comando que determinar√° la preparaci√≥n de la **plantilla del sandbox** antes de que se cree una [instant√°nea](https://www.google.com/url?sa=E&q=https%3A%2F%2Fe2b.dev%2Fdocs%2Ftemplates%2Foverview%23how-it-works). Se ejecuta en un bucle infinito hasta que devuelve un c√≥digo de salida exitoso **0**. De esta manera puedes controlar cu√°nto tiempo debemos esperar por el [comando de inicio](https://www.google.com/url?sa=E&q=https%3A%2F%2Fe2b.dev%2Fdocs%2Ftemplates%2Fstart-command) o cualquier estado del sistema.

## How to add ready command

Cuando est√°s construyendo una plantilla de sandbox puedes especificar el comando de preparaci√≥n usando la opci√≥n --ready-cmd:

Generated bash

      `e2b template build --ready-cmd "<your-ready-commands>"`

## Sandbox template config

Puedes especificar el comando de preparaci√≥n tambi√©n dentro del archivo e2b.toml en el mismo directorio donde ejecutas e2b template build.

**e2b.toml**

Generated toml

      `# This is a config for E2B sandbox template
template_id = "lwdqsf91e9qk21ztb4mo"
dockerfile = "e2b.Dockerfile"
template_name = "my-agent-sandbox"
ready_cmd = "<your-ready-commands>"`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). Toml

IGNORE_WHEN_COPYING_END

## Default values

Por defecto, el comando de preparaci√≥n est√° establecido en sleep 0, lo que significa que la plantilla del sandbox estar√° lista inmediatamente. Si se define el [comando de inicio](https://www.google.com/url?sa=E&q=https%3A%2F%2Fe2b.dev%2Fdocs%2Ftemplates%2Fstart-command), el valor predeterminado se establece en sleep 20, lo que significa que la plantilla del sandbox esperar√° 20 segundos antes de tomar la instant√°nea.

## Examples

Aqu√≠ hay algunos ejemplos del comando de preparaci√≥n que puedes usar.

### Wait for URL to return 200 status code

Generated bash

      `ready_cmd = 'curl -s -o /dev/null -w "%{http_code}" http://localhost:3000 | grep -q "200"'`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). Bash

IGNORE_WHEN_COPYING_END

### Wait for a specific process to start

Generated bash

      `ready_cmd = 'pgrep my-process-name > /dev/null'`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). Bash

IGNORE_WHEN_COPYING_END

### Wait for a file to exist

Generated bash

      `ready_cmd = '[ -f /tmp/ready.flag ]'`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). Bash

IGNORE_WHEN_COPYING_END

# Customize sandbox CPU & RAM

Puedes personalizar la CPU y la RAM de tu plantilla de sandbox a trav√©s de la CLI de E2B.

Necesitar√°s crear una [plantilla de sandbox](https://www.google.com/url?sa=E&q=https%3A%2F%2Fe2b.dev%2Fdocs%2Ftemplates%2Foverview) primero.

Durante el paso de construcci√≥n, puedes especificar la CPU y la RAM de tu plantilla de sandbox.

El siguiente comando crear√° una plantilla de sandbox con 2 CPUs y 2GB de RAM.

**Terminal**

Generated bash

      `e2b template build -c "/root/.jupyter/start-up.sh" --cpu-count 2 --memory-mb 2048`

# Filesystem

Cada Sandbox de E2B tiene su propio sistema de archivos aislado. Los sandboxes del [nivel Hobby](https://www.google.com/url?sa=E&q=https%3A%2F%2Fe2b.dev%2Fdocs%2Fpricing%23hobby-tier) vienen con 1 GB de espacio en disco libre y los sandboxes del [nivel Pro](https://www.google.com/url?sa=E&q=https%3A%2F%2Fe2b.dev%2Fdocs%2Fpricing%23pro-tier) vienen con 5 GB.

Con el SDK de E2B puedes:

- [Leer y escribir archivos en el sandbox](https://www.google.com/url?sa=E&q=https%3A%2F%2Fe2b.dev%2Fdocs%2Ffilesystem%2Fread-and-write).
- [Observar un directorio para detectar cambios](https://www.google.com/url?sa=E&q=https%3A%2F%2Fe2b.dev%2Fdocs%2Ffilesystem%2Fwatch-directory).
- [Subir datos al sandbox](https://www.google.com/url?sa=E&q=https%3A%2F%2Fe2b.dev%2Fdocs%2Ffilesystem%2Fupload-data).
- [Descargar datos del sandbox](https://www.google.com/url?sa=E&q=https%3A%2F%2Fe2b.dev%2Fdocs%2Ffilesystem%2Fdownload-data).

# Read & write files

## Reading files

Puedes leer archivos del sistema de archivos del sandbox usando el m√©todo files.read().

**JavaScript & TypeScript**

Generated javascript

      `import { Sandbox } from '@e2b/code-interpreter'

const sandbox = await Sandbox.create()
const fileContent = await sandbox.files.read('/path/to/file')`

## Writing single files

Puedes escribir archivos individuales en el sistema de archivos del sandbox usando el m√©todo files.write().

**JavaScript & TypeScript**

Generated javascript

      `import { Sandbox } from '@e2b/code-interpreter'

const sandbox = await Sandbox.create()
await sandbox.files.write('/path/to/file', 'file content')`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). JavaScript

IGNORE_WHEN_COPYING_END

## Writing multiple files

Tambi√©n puedes escribir m√∫ltiples archivos en el sistema de archivos del sandbox usando el m√©todo files.write().

**JavaScript & TypeScript**

Generated javascript

      `import { Sandbox } from '@e2b/code-interpreter'

const sandbox = await Sandbox.create()

await sandbox.files.write([
  { path: '/path/to/a', data: 'file content' },
  { path: '/another/path/to/b', data: 'file content' }
])`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). JavaScript

IGNORE_WHEN_COPYING_END

# Watch sandbox directory for changes

Puedes observar un directorio para detectar cambios usando el m√©todo files.watchDir() en JavaScript y files.watch_dir() en Python.

> ‚ÑπÔ∏è Dado que los eventos se rastrean de forma as√≠ncrona, su entrega puede retrasarse. Se recomienda no recoger o cerrar el observador inmediatamente despu√©s de realizar un cambio.
> 

**JavaScript & TypeScript**

Generated javascript

      `import { Sandbox, FilesystemEventType } from '@e2b/code-interpreter'

const sandbox = await Sandbox.create()
const dirname = '/home/user'

// Empezar a observar el directorio para detectar cambios
const handle = await sandbox.files.watchDir(dirname, async (event) => {
  console.log(event)
  if (event.type === FilesystemEventType.WRITE) {
    console.log(`wrote to file ${event.name}`)
  }
})

// Disparar evento de escritura de archivo
await sandbox.files.write(`${dirname}/my-file`, 'hello')`

## Recursive Watching

Puedes habilitar la observaci√≥n recursiva usando el par√°metro recursive.

> ‚ÑπÔ∏è Al crear nuevas carpetas r√°pidamente (por ejemplo, rutas de carpetas profundamente anidadas), los eventos que no sean CREATE podr√≠an no emitirse. Para evitar este comportamiento, crea la estructura de carpetas requerida con antelaci√≥n.
> 

**JavaScript & TypeScript**

Generated javascript

      `import { Sandbox, FilesystemEventType } from '@e2b/code-interpreter'

const sandbox = await Sandbox.create()
const dirname = '/home/user'

// Empezar a observar el directorio para detectar cambios
const handle = await sandbox.files.watchDir(dirname, async (event) => {
  console.log(event)
  if (event.type === FilesystemEventType.WRITE) {
    console.log(`wrote to file ${event.name}`)
  }
}, {
  recursive: true
})

// Disparar evento de escritura de archivo
await sandbox.files.write(`${dirname}/my-folder/my-file`, 'hello')`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). JavaScript

IGNORE_WHEN_COPYING_END

# Upload data to sandbox

Puedes subir datos al sandbox usando el m√©todo files.write().

## Upload single file

**JavaScript & TypeScript**

Generated javascript

      `import fs from 'fs'
import { Sandbox } from '@e2b/code-interpreter'

const sandbox = await Sandbox.create()

// Leer archivo del sistema de archivos local
const content = fs.readFileSync('/local/path')
// Subir archivo al sandbox
await sandbox.files.write('/path/in/sandbox', content)`

## Upload with pre-signed URL

A veces, quieres permitir que los usuarios desde entornos no autorizados, como un navegador, suban archivos al sandbox. Para este caso de uso, puedes usar URLs pre-firmadas para permitir que los usuarios suban archivos de forma segura.

**JavaScript & TypeScript**

Generated javascript

      `import fs from 'fs'
import { Sandbox } from '@e2b/code-interpreter'

// Iniciar un sandbox seguro (todas las operaciones deben ser autorizadas por defecto)
const sandbox = await Sandbox.create(template, { secure: true })

// Crear una URL pre-firmada para la subida de archivos con una expiraci√≥n de 10 segundos
const publicUploadUrl = await sandbox.uploadUrl(
  'demo.txt',
  {
    useSignature: true,
    useSignatureExpiration: 10_000, // opcional
  },
)

// Subir un archivo con una URL pre-firmada (esto se puede usar en cualquier entorno, como un navegador)
const form = new FormData()
form.append('file', 'file content')

await fetch(publicUploadUrl, { method: 'POST', body: form })

// El archivo ahora est√° disponible en el sandbox y puedes leerlo
const content = fs.readFileSync('demo.txt')`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). JavaScript

IGNORE_WHEN_COPYING_END

## Upload directory / multiple files

**JavaScript & TypeScript**

Generated javascript

      `const fs = require('fs');
const path = require('path');
import { Sandbox } from '@e2b/code-interpreter'

const sandbox = await Sandbox.create()

// Leer todos los archivos en el directorio y almacenar sus rutas y contenidos en un array
const readDirectoryFiles = (directoryPath) => {
  // Leer todos los archivos en el directorio local
  const files = fs.readdirSync(directoryPath);

  // Mapear archivos a objetos con ruta y datos
  const filesArray = files
    .filter(file => {
      const fullPath = path.join(directoryPath, file);
      // Omitir si es un directorio
      return fs.statSync(fullPath).isFile();
    })
    .map(file => {
      const filePath = path.join(directoryPath, file);
      // Leer el contenido de cada archivo
      return {
        path: filePath,
        data: fs.readFileSync(filePath, 'utf8')
      };
    });

  return filesArray;
};

// Ejemplo de uso
const files = readDirectoryContents('/local/dir');
console.log(files);
// [
//   { path: '/local/dir/file1.txt', data: 'File 1 contents...' },
//   { path: '/local/dir/file2.txt', data: 'File 2 contents...' },
//   // ...
// ]

await sandbox.files.write(files)`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). JavaScript

IGNORE_WHEN_COPYING_END

# Download data from sandbox

Puedes descargar datos del sandbox usando el m√©todo files.read().

**JavaScript & TypeScript**

Generated javascript

      `import fs from 'fs'
import { Sandbox } from '@e2b/code-interpreter'

const sandbox = await Sandbox.create()

// Leer archivo del sandbox
const content = await sandbox.files.read('/path/in/sandbox')
// Escribir archivo en el sistema de archivos local
fs.writeFileSync('/local/path', content)`

## Download with pre-signed URL

A veces, es posible que desees permitir que usuarios de entornos no autorizados, como un navegador, descarguen archivos del sandbox. Para este caso de uso, puedes utilizar URLs pre-firmadas para permitir que los usuarios descarguen archivos de forma segura.

**JavaScript & TypeScript**

Generated javascript

      `import fs from 'fs'
import { Sandbox } from '@e2b/code-interpreter'

// Iniciar un sandbox seguro (todas las operaciones deben estar autorizadas por defecto)
const sandbox = await Sandbox.create(template, { secure: true })

// Crear una URL pre-firmada para la descarga de archivos con una expiraci√≥n de 10 segundos
const publicUrl = await sandbox.downloadUrl(
  'demo.txt',
  {
    useSignature: true,
    useSignatureExpiration: 10_000, // opcional
  }
)

// Descargar un archivo con una URL pre-firmada (esto se puede usar en cualquier entorno, como un navegador)
const res = await fetch(publicUrl)
const content = await res.text()`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). JavaScript

IGNORE_WHEN_COPYING_END

# Running commands in sandbox

Puedes ejecutar comandos de terminal dentro del sandbox usando el m√©todo commands.run().

**JavaScript & TypeScript**

Generated javascript

      `import { Sandbox } from '@e2b/code-interpreter'

const sandbox = await Sandbox.create()
const result = await sandbox.commands.run('ls -l')
console.log(result)`

# Streaming command output

Para transmitir la salida de un comando a medida que se ejecuta, pasa los callbacks onStdout, onStderr al m√©todo commands.run() en JavaScript o los callbacks on_stdout, on_stderr al m√©todo commands.run() en Python.

**JavaScript & TypeScript**

Generated javascript

      `import { Sandbox } from '@e2b/code-interpreter'

const sandbox = await Sandbox.create()
const result = await sandbox.commands.run('echo hello; sleep 1; echo world', {
  onStdout: (data) => {
    console.log(data)
  },
  onStderr: (data) => {
    console.log(data)
  },
})

console.log(result)`

# Running commands in background

Para ejecutar comandos en segundo plano, pasa la opci√≥n background al m√©todo commands.run(). Esto retornar√° inmediatamente y el comando continuar√° ejecut√°ndose en el sandbox. Posteriormente, puedes terminar el comando usando el m√©todo commands.kill().

**JavaScript & TypeScript**

Generated javascript

      `import { Sandbox } from '@e2b/code-interpreter'

const sandbox = await Sandbox.create()

// Iniciar el comando en segundo plano
const command = await sandbox.commands.run('echo hello; sleep 10; echo world', {
  background: true,
  onStdout: (data) => {
    console.log(data)
  },
})

// Terminar el comando
await command.kill()`

# E2B CLI

E2B CLI es una herramienta de l√≠nea de comandos que te permite listar, terminar sandboxes en ejecuci√≥n y gestionar [plantillas de sandbox](https://www.google.com/url?sa=E&q=https%3A%2F%2Fe2b.dev%2Fdocs%2Ftemplates%2Foverview).

## Installation

### Using Homebrew (on macOS)

**Terminal**

Generated bash

      `brew install e2b`

### Using NPM

Puedes instalar la CLI de E2B usando el siguiente comando:

**Terminal**

Generated bash

      `npm i -g @e2b/cli`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). Bash

IGNORE_WHEN_COPYING_END

### Beta CLI

La √∫ltima versi√≥n beta de la CLI se puede instalar desde NPM usando el siguiente comando:

**Terminal**

Generated bash

      `npm i -g @e2b/cli@beta`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). Bash

IGNORE_WHEN_COPYING_END

# Authentication in CLI

Debes autenticarte con la CLI de E2B antes de usarla. Ejecuta el siguiente comando para iniciar sesi√≥n en tu cuenta de E2B:

**Terminal**

Generated bash

      `e2b auth login`

# List sandboxes

Puedes listar todos los sandboxes en ejecuci√≥n usando el siguiente comando:

**Terminal**

Generated bash

      `e2b sandbox list`

---

## Changes in the Beta CLI

> ‚ÑπÔ∏è Si est√°s usando la versi√≥n beta de la CLI, el comando sandbox list fue actualizado.
> 

### List all sandboxes

Para listar todos los sandboxes, usa el siguiente comando:

Generated bash

      `e2b sandbox list`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). Bash

IGNORE_WHEN_COPYING_END

Esto devolver√° todos los sandboxes, tanto en ejecuci√≥n como pausados.

### Filter by state

Para filtrar los sandboxes por su estado puedes especificar la bandera --state, que puede ser running, paused o ambos.

Generated bash

      `e2b sandbox list --state running,paused`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). Bash

IGNORE_WHEN_COPYING_END

### Filter by metadata

Para filtrar los sandboxes por sus metadatos, usa la bandera --metadata.

Generated bash

      `e2b sandbox list --metadata key1=value1,key2=value2`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). Bash

IGNORE_WHEN_COPYING_END

### List limit

Para limitar la cantidad de sandboxes devueltos por el comando, usa la bandera --limit.

Generated bash

      `e2b sandbox list --limit 10`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). Bash

IGNORE_WHEN_COPYING_END

Por defecto, el comando devolver√° todos los sandboxes.

# Shutdown running sandboxes

Puedes apagar uno o todos los sandboxes en ejecuci√≥n con la CLI de E2B.

## Shutdown single sandbox

Para apagar un solo sandbox, ejecuta el siguiente comando:

**Terminal**

Generated bash

      `e2b sandbox kill <sandbox-id>`

## Shutdown all sandboxes

Para apagar todos los sandboxes en ejecuci√≥n, ejecuta el siguiente comando:

**Terminal**

Generated bash

      `e2b sandbox kill --all`

IGNORE_WHEN_COPYING_START

content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). Bash

IGNORE_WHEN_COPYING_END

# Docker push authentication error

Cuando la CLI intenta enviar una imagen de Docker al registro, es posible que encuentres un error de autenticaci√≥n. Este error a veces ocurre para los usuarios cuando Docker no env√≠a ninguna credencial al registro. Para resolver este problema, puedes usar los siguientes pasos:

## MacOS

1. Abre Docker Desktop.
2. Ve a Configuraci√≥n.
3. Ve a Docker Engine.
4. Agrega la siguiente l√≠nea a la configuraci√≥n JSON:Generated jsonGenerated json
    
          `{
      "insecure-registries": ["host.docker.internal:49984"]
    }`
    
    Puede verse as√≠:
    
          `{
      "builder": {
        "gc": {
          "defaultKeepStorage": "20GB",
          "enabled": true
        }
      },
      "features": {
        "buildkit": true
      },
      "insecure-registries": [
        "host.docker.internal:49984"
      ]
    }`
    
    IGNORE_WHEN_COPYING_START
    
    content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). Json
    
    IGNORE_WHEN_COPYING_END
    
    Esto permite que Docker env√≠e solicitudes al proxy local, que maneja la autenticaci√≥n.
    
5. Haz clic en Aplicar y Reiniciar.

## Linux

1. Edita el archivo de configuraci√≥n de Docker (generalmente /etc/docker/daemon.json) y agrega la siguiente l√≠nea, si el archivo no existe, cr√©alo:Generated json
    
          `{
      "insecure-registries": ["localhost:49984"]
    }`
    
    IGNORE_WHEN_COPYING_START
    
    content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). Json
    
    IGNORE_WHEN_COPYING_END
    
2. Reinicia Docker:Generated bash
    
          `sudo systemctl restart docker`
    
    IGNORE_WHEN_COPYING_START
    
    content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). Bash
    
    IGNORE_WHEN_COPYING_END
    

## Windows

1. Abre Docker Desktop.
2. Ve a Configuraci√≥n.
3. Ve a Docker Engine.
4. Agrega la siguiente l√≠nea a la configuraci√≥n JSON:Generated json
    
          `{
      "insecure-registries": ["host.docker.internal:49984"]
    }`
    
    IGNORE_WHEN_COPYING_START
    
    content_copy  download  Use code [with caution](https://support.google.com/legal/answer/13505487). Json
    
    IGNORE_WHEN_COPYING_END
    
5. Haz clic en Aplicar y Reiniciar.